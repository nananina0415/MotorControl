# 문제 2-1 풀이: 전통적 방법(극점 배치법)을 이용한 PID 설계

이 문서는 `P2_PID_Design_Ideas.md`에 기술된 **전통적 방법(Traditional Method)**, 즉 **극점 배치법(Pole Placement)**을 사용하여 **문제 2-1**을 해결하는 단계별 계산 과정을 상세히 설명합니다.

> **업데이트 (2025.12.11): 최근 측정 데이터(20251206_234437)를 반영하여 계산을 갱신했습니다.**

## 1. 시스템 파라미터 선정 (데이터 반영)

측정된 `data/1-3`의 결과에 따르면, 시상수는 일정하지만 DC 이득(K)은 듀티비에 따라 변합니다.

*   **시상수 ($\tau$)**: 측정값들이 약 3.0s로 일정함 $\rightarrow$ **$\tau = 3.01$ s** (평균값 적용)
*   **DC 이득 ($K$)**: 듀티비에 따라 3.85 ~ 6.238 범위로 변동

### 파라미터 선정 이유: Max $K$ 전략
제어기 설계 시, **가장 불안정해지기 쉬운 조건(Worst Case)**을 기준으로 잡는 것이 안전합니다.
$K$ 값이 클수록 시스템의 루프 이득이 커져 진동이나 불안정 발생 가능성이 높아집니다.
따라서 측정된 $K$ 값 중 **최댓값**을 사용하여 설계합니다. 이 경우 $K$가 더 작은 구간에서는 안정이 보장됩니다.

선정된 값:
*   **$\tau = 3.01$ s**
*   **$K = 6.238$ (deg/s)/PWM** (Duty 250일 때의 값)

---

## 2. 설계 요구사항

1.  **초과 (Overshoot, $M_p$)**: $< 15\%$
2.  **정착 시간 (Settling Time, $t_s$)**: $\le 0.5s$ (2% 기준)
3.  **정상 상태 오차 (Steady-State Error, $e_{ss}$)**: $0$

---

## 3. 이론적 유도 및 계산

### 1단계: 목표 폐루프 극점(Desired Closed-Loop Poles) 결정

**1. 감쇠비 ($\zeta$) 결정:**
오버슈트 15% 조건에서 $\zeta > 0.517$. 안전하게 **$\zeta = 0.6$** 선정.

**2. 실수부 ($\sigma$) 및 고유 진동수 ($\omega_n$) 결정:**
정착 시간 $0.5s$ 조건에서:
$$ \sigma \ge \frac{4.6}{0.5} = 9.2 \implies \text{선정: } \sigma = 9.2 $$
$$ \omega_n = \frac{\sigma}{\zeta} = \frac{9.2}{0.6} \approx 15.33 \text{ rad/s} $$

**지배 극점 위치:** $s_{1,2} = -9.2 \pm j12.26$

### 2단계: 추가 극점 배치

3차 시스템이므로 추가 극점 $s_3 = -\alpha$가 필요합니다.
지배 극점보다 5배 빠르게 설정: **$\alpha = 5\sigma = 46$**

### 3단계: 게인($K_p, K_i, K_d$) 계산

전통적 방법(극점 배치법)의 공식에 실제 파라미터를 대입합니다.

**공통 항:**
*   $2\zeta\omega_n = 18.4$
*   $\omega_n^2 \approx 235.0$

**1. $K_d$ (미분 게인) 계산:**
$$ K_d = \frac{\tau(\alpha + 2\zeta\omega_n) - 1}{K} $$
$$ K_d = \frac{3.01(46 + 18.4) - 1}{6.238} = \frac{3.01(64.4) - 1}{6.238} = \frac{192.844}{6.238} \approx \mathbf{30.91} $$

**2. $K_p$ (비례 게인) 계산:**
$$ K_p = \frac{\tau(2\zeta\omega_n \alpha + \omega_n^2)}{K} $$
$$ K_p = \frac{3.01(18.4 \times 46 + 235.0)}{6.238} = \frac{3.01(846.4 + 235)}{6.238} = \frac{3255.01}{6.238} \approx \mathbf{521.80} $$

**3. $K_i$ (적분 게인) 계산:**
$$ K_i = \frac{\tau \alpha \omega_n^2}{K} $$
$$ K_i = \frac{3.01(46 \times 235.0)}{6.238} = \frac{3.01(10810)}{6.238} = \frac{32538.1}{6.238} \approx \mathbf{5216.11} $$

---

## 4. 최종 결과 및 고찰

### 계산된 PID 게인
*   **$K_p \approx 521.8$**
*   **$K_i \approx 5216.1$**
*   **$K_d \approx 30.9$**

### 고찰 (주의사항)
계산된 게인 값이 상당히 큽니다. 이는 모터의 본래 반응 속도(시상수 약 3초)에 비해 요구되는 반응 속도(정착 시간 0.5초)가 매우 빠르기 때문입니다.
*   **포화(Saturation) 주의**: 실제 시스템에서 이렇게 큰 게인을 사용하면 시작하자마자 PWM 출력이 최댓값(포화)에 도달하여, 이론적인 정착 시간(0.5s)을 달성하지 못할 가능성이 높습니다.
*   **현실적 타협**: 만약 테스트 시 제어가 불안정하거나 포화가 심하다면, 목표 정착 시간($t_s$)을 0.5초에서 1.0초 정도로 완화하여 재설계하는 것을 추천합니다.
