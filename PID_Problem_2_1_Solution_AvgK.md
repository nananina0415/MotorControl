# 문제 2-1 풀이: K 평균값(Average Value) 적용

이 문서는 `PID_Problem_2_1_Solution.md`의 변형으로, **$K$의 최댓값 대신 평균값**을 사용하여 설계했을 때의 결과를 보여줍니다.

## 1. 사용된 파라미터 (평균값 기준)

측정 데이터(`data/1-3/summary_*.json`)의 평균값을 사용합니다.

*   **시상수 ($\tau$)**: **$3.01$ s** (동일)
*   **DC 이득 ($K_{avg}$)**: **$5.233$ (deg/s)/PWM**
    *   *비교*: 앞선 `Max K` 전략($K=6.238$)보다 값이 작습니다.
    *   *원리*: 모터의 이득($K$)이 작다고 가정하고 설계하기 때문에, 동일한 성능을 내기 위해 **계산되는 PID 게인은 더 커집니다**. (제어기가 더 힘을 써야 함)

---

## 2. 게인 계산과정

목표 극점 위치와 중간 계산 항들은 이전과 동일합니다. (요구사항이 같으므로)

**공통 항 (분자):**
*   $K_d$ 분자: $\tau(\alpha + 2\zeta\omega_n) - 1 \approx 192.844$
*   $K_p$ 분자: $\tau(2\zeta\omega_n \alpha + \omega_n^2) \approx 3255.01$
*   $K_i$ 분자: $\tau \alpha \omega_n^2 \approx 32538.1$

**게인 산출 (분모에 $K = 5.233$ 대입):**

1.  **$K_d$ (미분 게인):**
    $$ K_d = \frac{192.844}{5.233} \approx \mathbf{36.85} $$

2.  **$K_p$ (비례 게인):**
    $$ K_p = \frac{3255.01}{5.233} \approx \mathbf{622.02} $$

3.  **$K_i$ (적분 게인):**
    $$ K_i = \frac{32538.1}{5.233} \approx \mathbf{6217.87} $$

---

## 3. 결과 비교 (Max K vs Avg K)

| 구분 | Max K 전략 ($K=6.238$) | Avg K 전략 ($K=5.233$) | 비고 |
| :--- | :--- | :--- | :--- |
| **$K_p$** | 521.8 | **622.0** (+19%) | $K$가 작아지면 |
| **$K_i$** | 5216.1 | **6217.9** (+19%) | PID 게인은 |
| **$K_d$** | 30.9 | **36.9** (+19%) | 커집니다. |

### 어떤 값을 써야 할까?

*   **Max K 전략 추천**: 실제 모터가 특정 구간(Duty 250 등)에서 $K$가 6.2까지 커진다면, **Avg K로 설계한 높은 게인(622)**을 적용했을 때 시스템이 너무 민감하게 반응하여 **진동(Oscillation)**할 위험이 큽니다.
*   안정성을 최우선으로 한다면 $K$가 가장 클 때를 기준으로 보수적으로(게인을 낮게) 잡는 것이 좋습니다.
